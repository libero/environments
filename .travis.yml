sudo: false

language: minimal

branches:
    only:
        - master

before_install:
    - openssl aes-256-cbc -K $encrypted_a389905ea254_key -iv $encrypted_a389905ea254_iv -in travis-ci.key.enc -out travis-ci.key -d
    - gpg --import travis-ci.key
    - git crypt unlock

script:
    - shellcheck scripts/*.sh

deploy:
    provider: script
    script: bash scripts/deploy.sh ec2-user@34.239.171.22 keys/single-node--unstable.key

    on:
        branch: master
